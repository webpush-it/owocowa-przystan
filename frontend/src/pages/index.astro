---
import Layout from '../layouts/Layout.astro'
import Header from '../components/Header.astro'
import Footer from '../components/Footer.astro'
import Hero from '../components/Hero.astro'
import { client, urlFor, type Workshop } from '../lib/sanity'

// Pobieranie danych z Sanity (GROQ query)
const query = `*[_type == "workshop"]{title, slug, mainImage, description, duration}`
const workshops = await client.fetch<Workshop[]>(query)
const validWorkshops = workshops.filter(w => w.title && w.slug?.current)

// Dane statyczne (fallback je≈õli CMS pusty lub sekcje sta≈Çe)
const staticAbout = "Nasza Owocowa Przysta≈Ñ to sad prowadzony od kilku pokole≈Ñ z pasjƒÖ i mi≈Ço≈õciƒÖ. To miejsce wype≈Çnione barwami i smakami natury ‚Äì jab≈Çonie, grusze, ≈õliwy. Naszym has≈Çem jest szczero≈õƒá."
---

<Layout title="Strona G≈Ç√≥wna">
    <Header />

    <main>
        <Hero />

        <section id="o-nas" class="py-20 px-4 max-w-5xl mx-auto text-center">
            <h2 class="text-4xl font-bold text-[#2F5233] mt-6 mb-6">O naszej Przystani</h2>
            <p class="text-lg text-stone-600 leading-relaxed max-w-3xl mx-auto">
                {staticAbout}
            </p>

            <div class="mt-12 grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="p-6 bg-white rounded-xl shadow-sm border border-stone-100">
                    <div class="text-4xl mb-4">üåø</div>
                    <h3 class="text-xl font-bold mb-2">Ekologia</h3>
                    <p class="text-stone-500">Szacunek do natury to podstawa naszej pracy.</p>
                </div>
                <div class="p-6 bg-white rounded-xl shadow-sm border border-stone-100">
                    <div class="text-4xl mb-4">üçé</div>
                    <h3 class="text-xl font-bold mb-2">Tradycja</h3>
                    <p class="text-stone-500">Sad prowadzony od pokole≈Ñ z mi≈Ço≈õciƒÖ.</p>
                </div>
                <div class="p-6 bg-white rounded-xl shadow-sm border border-stone-100">
                    <div class="text-4xl mb-4">üéì</div>
                    <h3 class="text-xl font-bold mb-2">Edukacja</h3>
                    <p class="text-stone-500">Wiedza przekazywana poprzez zabawƒô.</p>
                </div>
            </div>
        </section>

        <section id="oferta" class="py-20 bg-[#E8E6df]">
            <div class="max-w-6xl mx-auto px-4">
                <div class="text-center mt-6 mb-8 md:mb-16">
                    <span class="text-[#C84C38] font-bold uppercase tracking-wider">Warsztaty</span>
                    <h2 class="text-4xl font-bold text-[#2F5233] mt-2">Dla szk√≥≈Ç i grup</h2>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    {validWorkshops.length > 0 ? validWorkshops.map((workshop) => (
                            <article class="bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-xl transition group">
                                <div class="h-48 overflow-hidden">
                                    {workshop.mainImage && (
                                            <img
                                                    src={urlFor(workshop.mainImage).width(600).height(400).url()}
                                                    alt={workshop.title}
                                                    class="w-full h-full object-cover group-hover:scale-105 transition duration-500"
                                            />
                                    )}
                                </div>
                                <div class="p-6">
                                    <h3 class="text-2xl font-bold text-[#2F5233] mb-2">{workshop.title}</h3>
                                    <div class="flex items-center gap-4 text-sm text-stone-500 mb-4">
                                        <span>‚è± {workshop.duration}</span>
                                    </div>
                                    <p class="text-stone-600 mb-6 line-clamp-3">{workshop.description}</p>
                                    <a href={`/warsztaty/${workshop.slug?.current}`} class="text-[#C84C38] font-bold hover:underline">
                                        Czytaj wiƒôcej &rarr;
                                    </a>
                                </div>
                            </article>
                    )) : (
                            <div class="col-span-full py-12 text-center bg-stone-100 rounded-xl border-2 border-dashed border-stone-200">
                                <p class="text-stone-500 italic">Obecnie przygotowujemy nowƒÖ ofertƒô warsztat√≥w. Zapraszamy wkr√≥tce!</p>
                                <p class="mt-2 font-bold text-[#2F5233]">Zadzwo≈Ñ do nas: 531 878 049</p>
                            </div>
                    )}
                </div>
            </div>
        </section>

        <section id="kontakt" class="py-20 max-w-6xl mx-auto px-4 grid md:grid-cols-2 gap-12 items-center">
            <div>
                <h2 class="text-4xl font-bold text-[#2F5233] mb-6">Odwied≈∫ nas</h2>
                <p class="mb-8 text-stone-600">
                    Chcesz zorganizowaƒá wycieczkƒô szkolnƒÖ lub warsztaty?
                    Zadzwo≈Ñ lub napisz do nas. Jeste≈õmy otwarci na Twoje propozycje.
                </p>

                <div class="space-y-4">
                    <div class="flex items-start gap-4">
                        <span class="text-2xl">üìç</span>
                        <div>
                            <p class="font-bold text-stone-800">Borowno-Kolonia, ul. Klonowa 43</p>
                            <p class="text-stone-500">42-233 Mykan√≥w</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-4">
                        <span class="text-2xl">üìß</span>
                        <a href="mailto:wierus.szymon@gmail.com" class="text-[#C84C38] font-bold">wierus.szymon@gmail.com</a>
                    </div>
                    <div class="flex items-center gap-4">
                        <span class="text-2xl">üì±</span>
                        <p class="font-bold">531 878 049</p>
                    </div>
                </div>

                <div class="mt-8 flex gap-4">
                    <a href="https://www.facebook.com/owocowaprzystan/" target="_blank" class="text-blue-600 font-bold hover:underline">
                        Facebook
                    </a>
                    <a href="https://www.instagram.com/owocowaprzystan/" target="_blank" class="text-pink-600 font-bold hover:underline">
                        Instagram
                    </a>
                </div>
            </div>

            <div class="h-[400px] bg-stone-200 rounded-2xl overflow-hidden shadow-inner">
                <iframe
                        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2515.0530960009487!2d19.2716666!3d50.92273479999999!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x4710b3416325a0d1%3A0xb657b30f6c46a70!2sOwocowa%20Przysta%C5%84!5e0!3m2!1spl!2spl!4v1768260212512!5m2!1spl!2spl"
                        width="100%"
                        height="100%"
                        style="border:0;"
                        allowfullscreen=""
                        loading="lazy">
                </iframe>
            </div>
        </section>
    </main>

    <Footer/>

</Layout>
