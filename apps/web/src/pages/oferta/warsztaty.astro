---
import Layout from '../../layouts/Layout.astro'
import WorkshopCard from '../../components/WorkshopCard.astro'
import { sanityClient } from '../../lib/sanity'

// Zapytanie do CMS
const query = `*[_type == "workshop"] {
  title,
  "slug": slug.current,
  mainImage,
  duration,
  targetGroup,
  description
}`

let workshops = []

try {
    workshops = await sanityClient.fetch(query)
} catch (error) {
    console.error("Błąd połączenia z Sanity (spodziewane jeśli nie skonfigurowane)", error)
}
---

<Layout title="Oferta Edukacyjna">
    <header class="bg-orange-50 text-stone-800 py-16 md:py-24 text-center">
        <div class="container mx-auto px-4">
            <span class="text-orange-600 uppercase tracking-widest font-bold text-sm mb-4 block">Edukacja i Zabawa</span>
            <h1 class="text-4xl md:text-6xl font-serif font-bold mb-6 text-stone-800">Warsztaty edukacyjne</h1>
            <p class="text-xl max-w-2xl mx-auto text-stone-600">
                Zapraszamy szkoły, przedszkola i rodziny. Zobacz, jak wygląda życie na wsi od kuchni.
                Nauka przez doświadczanie!
            </p>
        </div>
    </header>

    <section class="container mx-auto px-4 py-8 md:py-16">
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
            {workshops.map(workshop => (
                <WorkshopCard {...workshop} />
            ))}
        </div>
    </section>
</Layout>
