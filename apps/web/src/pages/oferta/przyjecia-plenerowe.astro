---
import Layout from '../../layouts/Layout.astro';
import { sanityClient, urlFor } from '../../lib/sanity';

// Pobieramy przyjęcia z Sanity
const parties = await sanityClient.fetch(`*[_type == "party"] | order(_createdAt asc) {
  title,
  icon,
  description,
  image
}`);
---

<Layout title="Przyjęcia Plenerowe - Owocowa Przystań">

    <header class="bg-amber-50 text-stone-800 py-16 md:py-24 relative overflow-hidden text-center border-b border-amber-100">
        <div class="container mx-auto px-4 relative z-10">
            <span class="text-amber-600 uppercase tracking-widest font-bold text-sm mb-4 block">Świętuj w naturze</span>
            <h1 class="text-4xl md:text-6xl font-serif font-bold mb-6 text-stone-800">Przyjęcia Plenerowe</h1>
            <p class="text-xl max-w-2xl mx-auto text-stone-600">
                Ucieknij z miasta i zorganizuj niezapomniane wydarzenie w sercu sadu.
                Lampki między drzewami, ognisko i slow food.
            </p>
        </div>
    </header>

    <section class="py-16 md:py-24 bg-white">
        <div class="container mx-auto px-4 max-w-6xl">

            {parties && parties.length > 0 ? (
                    <div class="space-y-16 md:space-y-24 mb-20">
                        {parties.map((party: any, index: number) => (
                                <div class={`flex flex-col md:flex-row gap-8 md:gap-16 items-center ${index % 2 === 1 ? 'md:flex-row-reverse' : ''}`}>

                                    <div class="w-full md:w-1/2">
                                        <div class="rounded-3xl overflow-hidden shadow-xl aspect-[4/3] md:aspect-square relative group">
                                            {party.image ? (
                                                    <img
                                                            src={urlFor(party.image).width(800).height(800).url()}
                                                            alt={party.title}
                                                            class="w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-700"
                                                    />
                                            ) : (
                                                    <div class="w-full h-full bg-amber-100 flex items-center justify-center text-6xl">
                                                        {party.icon || '✨'}
                                                    </div>
                                            )}
                                            <div class="absolute inset-0 border-4 border-white/20 rounded-3xl z-10 pointer-events-none"></div>
                                        </div>
                                    </div>

                                    <div class="w-full md:w-1/2">
                                        <div class="flex items-center gap-4 mb-4">
                                            {party.icon && <span class="text-4xl">{party.icon}</span>}
                                            <h2 class="text-3xl md:text-4xl font-serif font-bold text-stone-800">
                                                {party.title}
                                            </h2>
                                        </div>

                                        <p class="text-lg text-stone-600 leading-relaxed mb-8">
                                            {party.description}
                                        </p>

                                        <a href="/kontakt" class="inline-flex items-center font-bold text-amber-700 hover:text-amber-900 group">
                                            Zapytaj o wolny termin
                                            <span class="ml-2 transform group-hover:translate-x-1 transition-transform">→</span>
                                        </a>
                                    </div>

                                </div>
                        ))}
                    </div>
            ) : (
                    <div class="text-center py-20 bg-amber-50 rounded-3xl border border-dashed border-amber-200 mb-20">
                        <p class="text-stone-500 text-lg">Trwa przygotowywanie najnowszej oferty przyjęć...</p>
                    </div>
            )}

            <div class="bg-amber-100 rounded-3xl p-8 md:p-12 text-center border border-amber-200">
                <h3 class="text-2xl md:text-3xl font-serif font-bold text-stone-800 mb-4">Twój pomysł, nasza przestrzeń</h3>
                <p class="text-stone-600 mb-8 max-w-xl mx-auto">
                    Każde przyjęcie wyceniamy i planujemy indywidualnie, by idealnie dopasować się do Waszych potrzeb. Odezwij się do nas!
                </p>
                <a href="/kontakt" class="inline-flex items-center justify-center px-8 py-3 bg-amber-700 text-white font-bold rounded-full hover:bg-amber-800 transition-colors shadow-lg">
                    Zarezerwuj termin
                </a>
            </div>

        </div>
    </section>
</Layout>
